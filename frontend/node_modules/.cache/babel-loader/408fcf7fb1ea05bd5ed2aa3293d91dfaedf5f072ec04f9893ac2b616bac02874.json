{"ast":null,"code":"import React,{useEffect,useState,useContext}from'react';import{useParams}from'react-router-dom';import styles from'./ProductDetail.module.scss';import VerticalGallery from'../../../components/VerticalGallery/VerticalGallery';import{CartContext}from'../../../context/CartContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductDetail=()=>{const{productId}=useParams();const[product,setProduct]=useState(null);const[notification,setNotification]=useState('');const{addToCart}=useContext(CartContext);useEffect(()=>{const fetchProduct=async()=>{try{const response=await fetch(\"http://localhost:8000/api/products/\".concat(productId,\"/\"));if(!response.ok){throw new Error('Failed to fetch product');}const data=await response.json();setProduct(data);}catch(error){console.error('Error fetching product:',error);setNotification('Failed to load product details');}};fetchProduct();},[productId]);const handleAddToCart=()=>{addToCart(product);setNotification('Товар добавлен в корзину');setTimeout(()=>setNotification(''),3000);};const renderContent=content=>{return content.split('\\n').map((paragraph,index)=>/*#__PURE__*/_jsx(\"p\",{children:paragraph},index));};if(!product)return/*#__PURE__*/_jsx(\"div\",{children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"});return/*#__PURE__*/_jsxs(\"div\",{className:styles.productDetail,children:[notification&&/*#__PURE__*/_jsx(\"div\",{className:styles.notification,children:notification}),/*#__PURE__*/_jsxs(\"div\",{className:styles.productContent,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.productImages,children:product.images&&product.images.length>0&&/*#__PURE__*/_jsx(VerticalGallery,{images:product.images.map(image=>\"http://localhost:8000\".concat(image))})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.productInfo,children:[/*#__PURE__*/_jsx(\"h1\",{children:product.title}),/*#__PURE__*/_jsxs(\"div\",{className:styles.productText,children:[renderContent(product.content),/*#__PURE__*/_jsxs(\"p\",{className:styles.productPrice,children:[\"\\u0426\\u0435\\u043D\\u0430: \",product.price,\" \\u0440\\u0443\\u0431.\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:styles.addToCartButton,onClick:handleAddToCart,children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0432 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"})]})]})]});};export default ProductDetail;","map":{"version":3,"names":["React","useEffect","useState","useContext","useParams","styles","VerticalGallery","CartContext","jsx","_jsx","jsxs","_jsxs","ProductDetail","productId","product","setProduct","notification","setNotification","addToCart","fetchProduct","response","fetch","concat","ok","Error","data","json","error","console","handleAddToCart","setTimeout","renderContent","content","split","map","paragraph","index","children","className","productDetail","productContent","productImages","images","length","image","productInfo","title","productText","productPrice","price","addToCartButton","onClick"],"sources":["/home/kiipod/projects/slwrm/frontend/src/pages/ShopPage/ProductDetail/ProductDetail.jsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { useParams } from 'react-router-dom';\nimport styles from './ProductDetail.module.scss';\nimport VerticalGallery from '../../../components/VerticalGallery/VerticalGallery';\nimport { CartContext } from '../../../context/CartContext';\n\nconst ProductDetail = () => {\n  const { productId } = useParams();\n  const [product, setProduct] = useState(null);\n  const [notification, setNotification] = useState('');\n  const { addToCart } = useContext(CartContext);\n\n  useEffect(() => {\n    const fetchProduct = async () => {\n      try {\n        const response = await fetch(`http://localhost:8000/api/products/${productId}/`);\n        if (!response.ok) {\n          throw new Error('Failed to fetch product');\n        }\n        const data = await response.json();\n        setProduct(data);\n      } catch (error) {\n        console.error('Error fetching product:', error);\n        setNotification('Failed to load product details');\n      }\n    };\n\n    fetchProduct();\n  }, [productId]);\n\n  const handleAddToCart = () => {\n    addToCart(product);\n    setNotification('Товар добавлен в корзину');\n    setTimeout(() => setNotification(''), 3000);\n  };\n\n  const renderContent = (content) => {\n    return content.split('\\n').map((paragraph, index) => (\n      <p key={index}>{paragraph}</p>\n    ));\n  };\n\n  if (!product) return <div>Загрузка...</div>;\n\n  return (\n    <div className={styles.productDetail}>\n      {notification && <div className={styles.notification}>{notification}</div>}\n      <div className={styles.productContent}>\n        <div className={styles.productImages}>\n          {product.images && product.images.length > 0 && (\n            <VerticalGallery images={product.images.map(image => `http://localhost:8000${image}`)} />\n          )}\n        </div>\n\n        <div className={styles.productInfo}>\n          <h1>{product.title}</h1>\n          <div className={styles.productText}>\n            {renderContent(product.content)}\n            <p className={styles.productPrice}>Цена: {product.price} руб.</p>\n          </div>\n          <button className={styles.addToCartButton} onClick={handleAddToCart}>Добавить в корзину</button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProductDetail;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,UAAU,KAAQ,OAAO,CAC9D,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,MAAO,CAAAC,MAAM,KAAM,6BAA6B,CAChD,MAAO,CAAAC,eAAe,KAAM,qDAAqD,CACjF,OAASC,WAAW,KAAQ,8BAA8B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3D,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAAEC,SAAU,CAAC,CAAGT,SAAS,CAAC,CAAC,CACjC,KAAM,CAACU,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACc,YAAY,CAAEC,eAAe,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAAEgB,SAAU,CAAC,CAAGf,UAAU,CAACI,WAAW,CAAC,CAE7CN,SAAS,CAAC,IAAM,CACd,KAAM,CAAAkB,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,uCAAAC,MAAA,CAAuCT,SAAS,KAAG,CAAC,CAChF,GAAI,CAACO,QAAQ,CAACG,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,CAAC,yBAAyB,CAAC,CAC5C,CACA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAL,QAAQ,CAACM,IAAI,CAAC,CAAC,CAClCX,UAAU,CAACU,IAAI,CAAC,CAClB,CAAE,MAAOE,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/CV,eAAe,CAAC,gCAAgC,CAAC,CACnD,CACF,CAAC,CAEDE,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,CAACN,SAAS,CAAC,CAAC,CAEf,KAAM,CAAAgB,eAAe,CAAGA,CAAA,GAAM,CAC5BX,SAAS,CAACJ,OAAO,CAAC,CAClBG,eAAe,CAAC,0BAA0B,CAAC,CAC3Ca,UAAU,CAAC,IAAMb,eAAe,CAAC,EAAE,CAAC,CAAE,IAAI,CAAC,CAC7C,CAAC,CAED,KAAM,CAAAc,aAAa,CAAIC,OAAO,EAAK,CACjC,MAAO,CAAAA,OAAO,CAACC,KAAK,CAAC,IAAI,CAAC,CAACC,GAAG,CAAC,CAACC,SAAS,CAAEC,KAAK,gBAC9C3B,IAAA,MAAA4B,QAAA,CAAgBF,SAAS,EAAjBC,KAAqB,CAC9B,CAAC,CACJ,CAAC,CAED,GAAI,CAACtB,OAAO,CAAE,mBAAOL,IAAA,QAAA4B,QAAA,CAAK,qDAAW,CAAK,CAAC,CAE3C,mBACE1B,KAAA,QAAK2B,SAAS,CAAEjC,MAAM,CAACkC,aAAc,CAAAF,QAAA,EAClCrB,YAAY,eAAIP,IAAA,QAAK6B,SAAS,CAAEjC,MAAM,CAACW,YAAa,CAAAqB,QAAA,CAAErB,YAAY,CAAM,CAAC,cAC1EL,KAAA,QAAK2B,SAAS,CAAEjC,MAAM,CAACmC,cAAe,CAAAH,QAAA,eACpC5B,IAAA,QAAK6B,SAAS,CAAEjC,MAAM,CAACoC,aAAc,CAAAJ,QAAA,CAClCvB,OAAO,CAAC4B,MAAM,EAAI5B,OAAO,CAAC4B,MAAM,CAACC,MAAM,CAAG,CAAC,eAC1ClC,IAAA,CAACH,eAAe,EAACoC,MAAM,CAAE5B,OAAO,CAAC4B,MAAM,CAACR,GAAG,CAACU,KAAK,0BAAAtB,MAAA,CAA4BsB,KAAK,CAAE,CAAE,CAAE,CACzF,CACE,CAAC,cAENjC,KAAA,QAAK2B,SAAS,CAAEjC,MAAM,CAACwC,WAAY,CAAAR,QAAA,eACjC5B,IAAA,OAAA4B,QAAA,CAAKvB,OAAO,CAACgC,KAAK,CAAK,CAAC,cACxBnC,KAAA,QAAK2B,SAAS,CAAEjC,MAAM,CAAC0C,WAAY,CAAAV,QAAA,EAChCN,aAAa,CAACjB,OAAO,CAACkB,OAAO,CAAC,cAC/BrB,KAAA,MAAG2B,SAAS,CAAEjC,MAAM,CAAC2C,YAAa,CAAAX,QAAA,EAAC,4BAAM,CAACvB,OAAO,CAACmC,KAAK,CAAC,sBAAK,EAAG,CAAC,EAC9D,CAAC,cACNxC,IAAA,WAAQ6B,SAAS,CAAEjC,MAAM,CAAC6C,eAAgB,CAACC,OAAO,CAAEtB,eAAgB,CAAAQ,QAAA,CAAC,oGAAkB,CAAQ,CAAC,EAC7F,CAAC,EACH,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAzB,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}