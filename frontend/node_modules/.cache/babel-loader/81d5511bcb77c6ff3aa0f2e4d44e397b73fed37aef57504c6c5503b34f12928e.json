{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import styles from'./ShopPage.module.scss';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ShopPage=()=>{const[products,setProducts]=useState([]);const[categories,setCategories]=useState([]);const[selectedCategory,setSelectedCategory]=useState(null);const[isBurgerMenuOpen,setIsBurgerMenuOpen]=useState(false);useEffect(()=>{const fetchProducts=async()=>{try{const response=await fetch('http://localhost:8000/api/products/');const data=await response.json();setProducts(data);}catch(error){console.error('Error fetching products:',error);}};const fetchCategories=async()=>{try{const response=await fetch('http://localhost:8000/api/categories/');const data=await response.json();setCategories(data);console.log('Categories:',data);// Выводим категории для проверки\n}catch(error){console.error('Ошибка при получении категорий:',error);}};fetchProducts();fetchCategories();},[]);const filteredProducts=selectedCategory?products.filter(product=>product.category===selectedCategory):products;return/*#__PURE__*/_jsxs(\"div\",{className:styles.shopContainer,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.categoriesWrapper,children:/*#__PURE__*/_jsx(\"div\",{className:styles.categoriesContainer,children:/*#__PURE__*/_jsxs(\"ul\",{children:[categories.filter(category=>{return category.id!==6;}).map(category=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:selectedCategory===category.id?styles.activeCategory:'',onClick:()=>setSelectedCategory(category.id),children:category.name})},category.id)),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:selectedCategory===null?styles.activeCategory:'',onClick:()=>setSelectedCategory(null),children:\"\\u0432\\u0441\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\"})})]})})}),/*#__PURE__*/_jsx(\"div\",{className:styles.productsContainer,children:/*#__PURE__*/_jsx(\"div\",{className:styles.productsGrid,children:Array.isArray(filteredProducts)&&filteredProducts.length>0?filteredProducts.map((product,index)=>/*#__PURE__*/_jsx(\"div\",{className:styles.productCard,children:/*#__PURE__*/_jsxs(Link,{to:\"/product/\".concat(product.id),children:[/*#__PURE__*/_jsx(\"div\",{className:styles.productImage,children:product.images&&product.images.length>0?/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:8000\".concat(product.images[0]),alt:product.title,onError:e=>{e.target.onerror=null;e.target.src='https://via.placeholder.com/100';}}):/*#__PURE__*/_jsx(\"img\",{src:\"https://via.placeholder.com/100\",alt:product.title})}),/*#__PURE__*/_jsx(\"h3\",{className:styles.productTitle,children:product.title}),/*#__PURE__*/_jsx(\"p\",{className:styles.productDescription,children:product.description}),/*#__PURE__*/_jsxs(\"p\",{className:styles.productPrice,children:[\"\\u0426\\u0435\\u043D\\u0430: \",product.price,\" \\u0440\\u0443\\u0431.\"]}),/*#__PURE__*/_jsx(\"button\",{className:styles.productButton,children:\"\\u041F\\u041E\\u0414\\u0420\\u041E\\u0411\\u041D\\u0415\\u0415\"})]})},product.id)):/*#__PURE__*/_jsx(\"h2\",{className:styles.productNot,children:\"\\u041D\\u0435\\u0442 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0445 \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.burgerMenu,children:[/*#__PURE__*/_jsx(\"button\",{className:styles.burgerButton,onClick:()=>setIsBurgerMenuOpen(!isBurgerMenuOpen),children:isBurgerMenuOpen?'Закрыть категории':'Открыть категории'}),isBurgerMenuOpen&&/*#__PURE__*/_jsx(\"div\",{className:styles.burgerMenuOpen,children:/*#__PURE__*/_jsxs(\"ul\",{children:[categories.filter(category=>category.id!==6).map(category=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:selectedCategory===category.id?styles.activeCategory:'',onClick:()=>setSelectedCategory(category.id),children:category.name})},category.id)),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:selectedCategory===null?styles.activeCategory:'',onClick:()=>setSelectedCategory(null),children:\"\\u0432\\u0441\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\"})})]})})]})]});};export default ShopPage;","map":{"version":3,"names":["React","useState","useEffect","Link","styles","jsx","_jsx","jsxs","_jsxs","ShopPage","products","setProducts","categories","setCategories","selectedCategory","setSelectedCategory","isBurgerMenuOpen","setIsBurgerMenuOpen","fetchProducts","response","fetch","data","json","error","console","fetchCategories","log","filteredProducts","filter","product","category","className","shopContainer","children","categoriesWrapper","categoriesContainer","id","map","activeCategory","onClick","name","productsContainer","productsGrid","Array","isArray","length","index","productCard","to","concat","productImage","images","src","alt","title","onError","e","target","onerror","productTitle","productDescription","description","productPrice","price","productButton","productNot","burgerMenu","burgerButton","burgerMenuOpen"],"sources":["/home/kiipod/projects/slwrm/frontend/src/pages/ShopPage/ShopPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport styles from './ShopPage.module.scss';\n\nconst ShopPage = () => {\n  const [products, setProducts] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState(null);\n  const [isBurgerMenuOpen, setIsBurgerMenuOpen] = useState(false);\n\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        const response = await fetch('http://localhost:8000/api/products/');\n        const data = await response.json();\n        setProducts(data);\n      } catch (error) {\n        console.error('Error fetching products:', error);\n      }\n    };\n\n    const fetchCategories = async () => {\n      try {\n        const response = await fetch('http://localhost:8000/api/categories/');\n        const data = await response.json();\n        setCategories(data);\n        console.log('Categories:', data); // Выводим категории для проверки\n      } catch (error) {\n        console.error('Ошибка при получении категорий:', error);\n      }\n    };\n\n    fetchProducts();\n    fetchCategories();\n  }, []);\n\n  const filteredProducts = selectedCategory\n    ? products.filter(product => product.category === selectedCategory)\n    : products;\n\n  return (\n    <div className={styles.shopContainer}>\n      <div className={styles.categoriesWrapper}>\n        <div className={styles.categoriesContainer}>\n          <ul>\n            {categories\n              .filter(category => {\n                return category.id !== 6;\n              })\n              .map(category => (\n                <li key={category.id}>\n                  <button\n                    className={selectedCategory === category.id ? styles.activeCategory : ''}\n                    onClick={() => setSelectedCategory(category.id)}\n                  >\n                    {category.name}\n                  </button>\n                </li>\n              ))}\n            <br/>\n            <li>\n              <button\n                className={selectedCategory === null ? styles.activeCategory : ''}\n                onClick={() => setSelectedCategory(null)}\n              >\n                все категории\n              </button>\n            </li>\n          </ul>\n        </div>\n      </div>\n      <div className={styles.productsContainer}>\n        <div className={styles.productsGrid}>\n          {Array.isArray(filteredProducts) && filteredProducts.length > 0 ? (\n            filteredProducts.map((product, index) => (\n              <div\n                key={product.id}\n                className={styles.productCard}\n              >\n                <Link to={`/product/${product.id}`}>\n                  <div className={styles.productImage}>\n                    {product.images && product.images.length > 0 ? (\n                      <img src={`http://localhost:8000${product.images[0]}`} alt={product.title} onError={(e) => {\n                        e.target.onerror = null;\n                        e.target.src = 'https://via.placeholder.com/100';\n                      }} />\n                    ) : (\n                      <img src='https://via.placeholder.com/100' alt={product.title} />\n                    )}\n                  </div>\n                  <h3 className={styles.productTitle}>{product.title}</h3>\n                  <p className={styles.productDescription}>{product.description}</p>\n                  <p className={styles.productPrice}>Цена: {product.price} руб.</p>\n                  <button className={styles.productButton}>ПОДРОБНЕЕ</button>\n                </Link>\n              </div>\n            ))\n          ) : (\n            <h2 className={styles.productNot}>Нет доступных товаров</h2>\n          )}\n        </div>\n      </div>\n      <div className={styles.burgerMenu}>\n        <button className={styles.burgerButton} onClick={() => setIsBurgerMenuOpen(!isBurgerMenuOpen)}>\n          {isBurgerMenuOpen ? 'Закрыть категории' : 'Открыть категории'}\n        </button>\n        {isBurgerMenuOpen && (\n          <div className={styles.burgerMenuOpen}>\n            <ul>\n              {categories\n                .filter(category => category.id !== 6)\n                .map(category => (\n                  <li key={category.id}>\n                    <button\n                      className={selectedCategory === category.id ? styles.activeCategory : ''}\n                      onClick={() => setSelectedCategory(category.id)}\n                    >\n                      {category.name}\n                    </button>\n                  </li>\n                ))}\n              <br />\n              <li>\n                <button\n                  className={selectedCategory === null ? styles.activeCategory : ''}\n                  onClick={() => setSelectedCategory(null)}\n                >\n                  все категории\n                </button>\n              </li>\n            </ul>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ShopPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}